<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <title>脈輪測驗｜Katelyn's Crystal & Ore 晶礦飾品訂製</title>

  <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://code.iconify.design/iconify-icon/1.0.1/iconify-icon.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&family=Merienda:wght@400;700&family=Rock+Salt&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>




  <link rel="stylesheet" href="./assets/style/all.css">
  <link rel="stylesheet" href="./assets/style/style.css">


</head>
<!-- https://hackmd.io/UFgAadfSTf6L0sqXJvCV8g -->
<body>
  <header class="bg-slate-700 text-white py-[18px] px-3 sticky" style="z-index:1000">
    <nav class="container flex items-center mx-auto">
      <a href="index.html" class="block mr-auto">
        <h1 class="font-2 ">
          <div class="text-2xl font-bold ">Katelyn's</div>
          <div class="text-center text-slate-400">Crystal & Ore</div>
        </h1>
      </a>
  
      <ul class="items-center hidden text-xl lg:flex">
        <li onclick="changePage('test')"><a href="test.html" class=" hover:text-slate-400">脈輪測驗</a></li>
        <li class="mx-10"><a href="#" class=" hover:text-slate-400">找晶礦</a></li>
        <li onclick="changePage('design')"><a href="design.html" class="btn-outline outline-2 outline-neutral-50">客製化設計手串</a></li>
      </ul>
  
      <ul class="flex items-center ml-16 ">
        <li class="">
          <a href="cart.html" class="block px-1 py-2 hover:text-slate-400">
            <iconify-icon icon="bi:cart-dash" width="24" height="24" class="lg:hidden"></iconify-icon>
            <iconify-icon icon="bi:cart-dash" width="28" height="28" class="hidden lg:inline"></iconify-icon>
          </a>
        </li>
        <li class="ml-4 lg:ml-9 relative">
          <a href="#" class="block px-1 py-2 hover:text-slate-400">
            <iconify-icon icon="bx:user" width="24" height="24" class="lg:hidden"></iconify-icon>
            <iconify-icon icon="bx:user" width="28" height="28" class="hidden lg:block"></iconify-icon>
          </a>
          <div class="absolute w-[100px] bg-white border right-0 top-full text-neutral-900">
            <ul>
              <li><a href="member.html" class="block w-full px-3 py-2 text-center hover:bg-slate-400">會員中心</a></li>
              <li><a href="login.html" class="block w-full px-3 py-2 text-center hover:bg-slate-400">登入</a></li>
              <li><a href="#" class="block w-full px-3 py-2 text-center hover:bg-slate-400">登出</a></li>
              <li><a href="admin_orders.html" class="block w-full px-3 py-2 text-center hover:bg-slate-400">後台</a></li>
            </ul>
          </div>
        </li>
        <li class="ml-4 lg:hidden">
          <a href="#" class="block px-1 py-2 hover:text-slate-400" onclick="toggleMenu(1)">
            <iconify-icon icon="bx:menu" width="24" height="24"></iconify-icon>
          </a>
        </li>
        <li class="hidden ml-4">
          <a href="#" class="block px-1 py-2 hover:text-slate-400" onclick="toggleMenu(0)">
            <iconify-icon icon="carbon:close" width="24" height="24"></iconify-icon>
          </a>
        </li>
      </ul>
    </nav>
  
    <nav id="menu" class="fixed top-0 bottom-0 left-0 right-0 hidden lg:hidden bg-neutral-200 text-slate-700">
        <div class="px-3 bg-slate-700">
      <div class="container mx-auto flex items-center py-[18px]">
          
          <a href="#" class="block mr-auto">
            <div class="font-2 ">
              <div class="text-2xl font-bold text-white">Katelyn's</div>
              <div class="text-center text-slate-400">Crystal & Ore</div>
            </div>
          </a>
  
          <ul class="items-center">
            <li class="ml-4">
              <a href="#" class="block px-1 py-2 text-white hover:text-slate-400" onclick="toggleMenu(0)">
                <iconify-icon icon="carbon:close" width="24" height="24"></iconify-icon>
              </a>
            </li>
          </ul>
        </div>
      </div>
          <div class="px-3">
            <ul class="my-6">
                      <li><a href="test.html" class="block p-4 hover:text-neutral-500">脈輪測驗</a></li>
                      <li><a href="#" class="block p-4 hover:text-neutral-500 ">找晶礦</a></li>
                    </ul>
                 <a href="design.html" class="block w-full text-center btn-primary">客製化設計手串</a> 
          </div>
    </nav>
  </header>

  <section class="px-3 py-10 lg:py-20">
  <div class="container mx-auto">
    <h2 class="text-2xl font-bold mb-3">脈輪測驗</h2>
    <p class="text-lg lg:text-2xl mb-5 lg:mb-10" >完成49題測驗，了解您的脈輪能量分布</p>
    <form class="needs-validation" novalidate>

<ul class="tests-list text-center max-h-screen overflow-scroll">
  <!-- <li class="mb-8">
    <h3 class="mb-4 text-lg lg:text-2xl font-bold">Q1. 你擔心自己的財務狀況?</h3>
    
    <input type="radio" id="r1-1" name="r1" value="1">
    <label for="r1-1">沒有</label>

    <input type="radio" id="r1-2" name="r1" value="2">
    <label for="r1-2">很少</label>

    <input type="radio" id="r1-3" name="r1" value="3">
    <label for="r1-3">有時</label> 
      
    <input type="radio" id="r1-4" name="r1" value="4">
    <label for="r1-4">經常</label>       
  </li>
  <li class="mb-8">
    <h3 class="mb-4 text-lg lg:text-2xl font-bold">Q2. 你經常隱藏自己的情緒，不願意表露出來?</h3>
    
    <input type="radio" id="s1-1" name="s1" value="1">
    <label for="s1-1">沒有</label>

    <input type="radio" id="s1-2" name="s1" value="2">
    <label for="s1-2">很少</label>

    <input type="radio" id="s1-3" name="s1" value="3">
    <label for="s1-3">有時</label> 
      
    <input type="radio" id="s1-4" name="s1" value="4">
    <label for="s1-4">經常</label>       
  </li>   -->

</ul>
  <p class="text-center flex justify-between">
    <button id="testReset" class="btn-primary" >清除</button>
    
    <button type="submit" id="testSubmit" class="btn-primary">看結果</button>
  </p>
</form>        
  </div>
    
</section>
    
    <section id="results" class="px-3 py-10 lg:py-20 hidden">
      <div class="container mx-auto ">
        
        <ul class="md:w-3/4 lg:w-2/3 xl:w-1/2 mx-auto text-center mb-8 lg:mb-12">
          <li class="mb-4 flex items-center">
            <div class="w-3/12 text-center font-medium">
              <div class="text-xl lg:text-[28px]">頂輪</div>
            </div> 
            <div class="self-stretch w-6/12 flex items-center">
              <div id="c-chart" class="h-full bg-purple-400 w-1/2"></div>              
            </div>
            <div id="c-score" class="w-1/12 text-xl lg:text-[28px] ml-2"></div>
            <div id="c-result" class="w-2/12 text-lg lg:text-xl"></div>
          </li>
          <li class="mb-4 flex items-center">
            <div class="w-3/12 text-center font-medium">
              <div class="text-xl lg:text-[28px]">眉心輪</div>
            </div> 
            <div class="self-stretch w-6/12 flex items-center">
              <div id="e-chart" class="h-full bg-indigo-400 w-full"></div>              
            </div>
            <div id="e-score" class="w-1/12 text-xl lg:text-[28px] ml-2"></div>
            <div id="e-result" class="w-2/12 text-lg lg:text-xl"></div>
          </li>
          <li class="mb-4 flex items-center">
            <div class="w-3/12 text-center font-medium">
              <div class="text-xl lg:text-[28px]">喉輪</div>
            </div> 
            <div class="self-stretch w-6/12 flex items-center">
              <div id="t-chart" class="h-full bg-sky-400 w-1/6"></div>              
            </div>
            <div id="t-score" class="w-1/12 text-xl lg:text-[28px] ml-2"></div>
            <div id="t-result" class="w-2/12 text-lg lg:text-xl"></div>
          </li>
          <li class="mb-4 flex items-center">
            <div class="w-3/12 text-center font-medium">
              <div class="text-xl lg:text-[28px]">心輪</div>
            </div> 
            <div class="self-stretch w-6/12 flex items-center">
              <div id="h-chart" class="h-full bg-lime-400 w-3/4"></div>              
            </div>
            <div id="h-score" class="w-1/12 text-xl lg:text-[28px] ml-2"></div>
            <div id="h-result" class="w-2/12 text-lg lg:text-xl"></div>
          </li>
          <li class="mb-4 flex items-center">
            <div class="w-3/12 text-center font-medium">
              <div class="text-xl lg:text-[28px]">臍輪</div>
            </div> 
            <div class="self-stretch w-6/12 flex items-center">
              <div id="p-chart" class="h-full bg-yellow-400 w-2/3"></div>              
            </div>
            <div id="p-score" class="w-1/12 text-xl lg:text-[28px] ml-2"></div>
            <div id="p-result" class="w-2/12 text-lg lg:text-xl"></div>
          </li>
          <li class="mb-4 flex items-center">
            <div class="w-3/12 text-center font-medium">
              <div class="text-xl lg:text-[28px]">腹輪</div>
            </div> 
            <div class="self-stretch w-6/12 flex items-center">
              <div id="s-chart" class="h-full bg-orange-400 w-1/3"></div>              
            </div>
            <div id="s-score" class="w-1/12 text-xl lg:text-[28px] ml-2"></div>
            <div id="s-result" class="w-2/12 text-lg lg:text-xl"></div>
          </li>
          <li class="mb-4 flex items-center">
            <div class="w-3/12 text-center font-medium">
              <div class="text-xl lg:text-[28px]">海底輪</div>
            </div> 
            <div class="self-stretch w-6/12 flex items-center">
              <div id="r-chart" class="h-full bg-red-400 w-1/2"></div>              
            </div>
            <div id="r-score" class="w-1/12 text-xl lg:text-[28px] ml-2"></div>
            <div id="r-result" class="w-2/12 text-lg lg:text-xl"></div>
          </li>

          </ul>
          <ul class="lg:text-lg">
            <li class="mb-2 lg:mb-3 border-l-8 border-purple-400 px-2 py-1 lg:px-3 lg:py-2">
              <p>頂輪主要掌管智慧及和世界為一體的感覺。當此脈輪活躍時，你會傾向沒有偏見，並且十分意識到此世界和你的存在。</p>
              <p id="c-highLow"></p>
            </li>
            <li class="mb-2 lg:mb-3 border-l-8 border-indigo-400 px-2 py-1 lg:px-3 lg:py-2">
              <p>眉心輪主要掌管洞察力和視覺化能力。當此脈輪活躍時，你會有很好的直覺，並且喜歡幻想。</p>
              <p id="e-highLow"></p>
            </li>
            <li class="mb-2 lg:mb-3 border-l-8 border-sky-400 px-2 py-1 lg:px-3 lg:py-2">
              <p>喉輪主要掌管自我表達和言談。當喉輪活躍時，你將無障礙的表達你自己，你可以藉此而成為藝術家。</p>
              <p id="t-highLow"></p>
            </li>
            <li class="mb-2 lg:mb-3 border-l-8 border-lime-400 px-2 py-1 lg:px-3 lg:py-2">
              <p>心輪主要掌管愛，善良等一般情感。當心輪打開時，你會具有同情心、友善，並且你會致力於和諧的人際關係。</p>
              <p id="h-highLow"></p>
            </li>
            <li class="mb-2 lg:mb-3 border-l-8 border-yellow-400 px-2 py-1 lg:px-3 lg:py-2">
              <p>臍輪主要掌管你在團體中的感覺。當臍輪活躍時，你感覺在掌控中而且有足夠的自信心。</p>
              <p id="p-highLow"></p>
            </li class="mb-2 lg:mb-3">
            <li class="mb-2 lg:mb-3 border-l-8 border-orange-400 px-2 py-1 lg:px-3 lg:py-2">
              <p>腹輪主要掌管情感和性慾。當腹輪活躍時，你的情感表達自如，而且表達時不會流於過度情緒化，對於親密關係採取開放態度，感覺充滿熱情和活力。</p>
              <p id="s-highLow"></p>
            </li>
            <li class="mb-2 lg:mb-3 border-l-8 border-red-400 px-2 py-1 lg:px-3 lg:py-2">
              <p>海底輪的能量主要掌管與肉體的聯繫，使人感覺安全放心。如果海底輪處於活躍狀態，你將覺得有種「身植大地」的感覺，感到穩定和安全。你不會不必要的懷疑他人。你覺得活在當下，而且和你的肉體緊密結合，覺得有充分的領域感。</p>
              <p id="r-highLow"></p>
            </li>
          </ul>
        <div class="flex justify-center">
          <a href="#" class="w-full lg:w-auto btn-primary mt-6">訂製專屬手串</a>                  
        </div>
        </div>

      </section>
      <script>
        
        // test


let chakraData;
axios.get("http://localhost:3000/chakras")
.then((res)=>{
  chakraData = res.data
})

let inputs;
axios.get("http://localhost:3000/tests")
.then((res)=>{
  renderTestsData(res.data)
  inputs = document.querySelectorAll("input");
  
})

function renderTestsData(data){
  let str = '';
  data.forEach(function(item){
    str+=`
    <li class="mb-8">
    <h3 class="mb-4 text-lg lg:text-2xl font-bold">Q${item.id}：${item.question}</h3>
    
    <input type="radio" id="${item.name}-1" name="${item.name}" value="${item.options[0][1]}">
    <label for="${item.name}-1">${item.options[0][0]}</label>
    <input type="radio" id="${item.name}-2" name="${item.name}" value="${item.options[1][1]}">
    <label for="${item.name}-2">${item.options[1][0]}</label>
    <input type="radio" id="${item.name}-3" name="${item.name}" value="${item.options[2][1]}">
    <label for="${item.name}-3">${item.options[2][0]}</label> 
      
    <input type="radio" id="${item.name}-4" name="${item.name}" value="${item.options[3][1]}">
    <label for="${item.name}-4">${item.options[3][0]}</label>       
  </li>
    
    `
  })

  document.querySelector(".tests-list").innerHTML = str
}

// 計算結果

// 驗證
// (function () {
// 'use strict'
// const forms = document.querySelectorAll('.needs-validation')
// Array.from(forms)
//   .forEach(function (form) {
//     form.addEventListener('testSubmit', function (event) {
//       if (!form.checkValidity()) {
//         event.preventDefault()
//         event.stopPropagation()
//       }
//       form.classList.add('was-validated')
//     }, false)
//   })
// })()

let crown = 0;
let eye = 0;
let throat = 0;
let heart = 0;
let plexus = 0;
let sacral = 0;
let root = 0;

function getScores() {
    let count=0;
    inputs.forEach(function(item){
      if(item.checked){
        count++
        switch (item.name.substring(0,1)) {
            case "c": crown += parseInt(item.value); break;
            case "e": eye += parseInt(item.value); break;
            case "t": throat += parseInt(item.value); break;
            case "h": heart += parseInt(item.value); break;
            case "p": plexus += parseInt(item.value); break;
            case "s": sacral += parseInt(item.value); break;
            case "r": root += parseInt(item.value); break;	                    
        }
      }
    })
    if(count<49){
        alert("有漏填的題目喔！")
    } else {
      showScores();
      createCharts();
      
      crown = eye = throat = heart = plexus = sacral = root = 0;
    }
}

function showScores() {
    document.querySelector("#c-score").innerHTML = crown;
    document.querySelector("#c-result").innerHTML = showResults(crown)[0];
    document.querySelector("#c-highLow").innerHTML = chakraData[6][showResults(crown)[1]] || "";

    document.querySelector("#e-score").innerHTML = eye;
    document.querySelector("#e-result").innerHTML = showResults(eye)[0];
    document.querySelector("#e-highLow").innerHTML = chakraData[5][showResults(eye)[1]] || "";

    document.querySelector("#t-score").innerHTML = throat;
    document.querySelector("#t-result").innerHTML = showResults(throat)[0];
    document.querySelector("#t-highLow").innerHTML = chakraData[4][showResults(throat)[1]] || "";

    document.querySelector("#h-score").innerHTML = heart;
    document.querySelector("#h-result").innerHTML = showResults(heart)[0];
    document.querySelector("#h-highLow").innerHTML = chakraData[3][showResults(heart)[1]] || "";

    document.querySelector("#p-score").innerHTML = plexus;
    document.querySelector("#p-result").innerHTML = showResults(plexus)[0];
    document.querySelector("#p-highLow").innerHTML = chakraData[2][showResults(plexus)[1]] || "";

    document.querySelector("#s-score").innerHTML = sacral;
    document.querySelector("#s-result").innerHTML = showResults(sacral)[0];
    document.querySelector("#s-highLow").innerHTML = chakraData[1][showResults(sacral)[1]] || "";

    document.querySelector("#r-score").innerHTML = root;      
    document.querySelector("#r-result").innerHTML = showResults(root)[0];
    document.querySelector("#r-highLow").innerHTML = chakraData[0][showResults(root)[1]] || "";
    document.querySelector("#results").classList.remove("hidden");

}
function showResults(score){
  return score<10 ? ["過弱","ifLow"] :
  score<14 ? ["偏弱","ifLow"] :
  score<20 ? ["一般",""] :
  score<25 ? ["偏強","ifHigh"] : ["過強","ifHigh"]
}

function createCharts() {
	let total = 28;
	document.querySelector("#c-chart").style.width = (crown / total * 100) + "%";
	document.querySelector("#e-chart").style.width = (eye / total * 100) + "%";
	document.querySelector("#t-chart").style.width = (throat / total * 100) + "%";
	document.querySelector("#h-chart").style.width = (heart / total * 100) + "%";
	document.querySelector("#p-chart").style.width = (plexus / total * 100) + "%";
	document.querySelector("#s-chart").style.width = (sacral / total * 100) + "%";
	document.querySelector("#r-chart").style.width = (root / total * 100) + "%";
}
document.querySelector("#testReset").onclick = function(e) { 
  e.preventDefault();
    crown = eye = throat = heart = plexus = sacral = root = 0;
	showScores();
    createCharts();
    Array.prototype.forEach.call(inputs, function(i) {
        i.checked = false
    });
    document.querySelector("#results").classList.add("hidden");

}

document.querySelector("#testSubmit").onclick = function(e) {
  e.preventDefault();
    getScores();
};



function userTestResult(){
//   axios.patch("http://localhost:3000/users",{})
//   .then(()=>{

//   })
  alert("已儲存資料")
}


      </script>

  <footer class="px-3 py-12 bg-slate-700 lg:py-8">
    <div class="container mx-auto">
      <div class="items-center justify-between lg:flex">
        <a href="#" class="block mb-6 font-serif italic lg:mb-0 ">
          <div class="text-2xl font-bold text-white">Katelyn's</div>
          <div class="text-slate-400">Crystal & Ore</div>
        </a>
        <ul class="text-neutral-200 lg:flex lg:items-center">
          <li class="mb-6 mr-20 lg:mb-0 ">
            <p class="mb-2 text-neutral-400">Info</p>
            <ul class="flex">
              <li class="mr-6"><a href="#" class="block">訂製流程</a></li>
              <li class="mr-6"><a href="#" class="block">最新消息</a></li>
              <li><a href="#" class="block">常見問題</a></li>
            </ul>
          </li>
          <li class="">
          <p class="mb-2 text-neutral-400">About</p>
            <ul class="flex">
              <li class="mr-6"><a href="#" class="block">關於我們</a></li>
              <li class="mr-6"><a href="#" class="block">聯絡我們</a></li>
              <li><a href="admin_orders.html" class="block">後臺管理</a></li>
            </ul>
          </li>
        </ul>
        <p class="self-end mt-7 lg:my-0 text-neutral-400">Copyright ©2022 Katelyn’s Crystal & Ore</p>     
      </div>
    </div>
  </footer>
  <script src="./assets/js/vendors.js"></script>
  <script src="./assets/js/all.js"></script>
</body>

</html>