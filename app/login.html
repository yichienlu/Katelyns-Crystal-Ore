---
title: 登入
layout: ./app/layout.ejs
engine: ejs
current: login
---
<section class="bg-neutral-200">
  <div class="px-3 py-10 lg:py-20">
    <div class="w-full sm:w-8/12 md:w-6/12 lg:w-4/12 mx-auto">
      <form action="">
        <label class="block mb-3">
          <div class="mb-1">Email</div>
          <input type="email" id="email" class=" w-full">        
        </label>
        <label class="block mb-6">
          <div class=" mb-1">Password</div>
          <input type="password" id="password" class=" w-full">
        </label>
        <div class="flex">
          <button type="button" id="register" class="w-1/2 p-3 mr-4 bg-slate-400 text-white">註冊</button>
          <button type="button" id="login" class="w-1/2 p-3 bg-slate-700 text-white">登入</button>
        </div>
      </form>
    </div>
  </div>
</section>

<script>

const email = document.querySelector("#email");
const password = document.querySelector("#password");

document.querySelector("#register").addEventListener("click",function(){
  console.log("click register")
  axios.post("http://localhost:3000/register",{
    "email": email.value.trim(),
    "password": password.value,
    "birthday":"",
    "test_result": [0,0,0,0,0,0,0]
  })
  .then((res)=>{
    console.log(res.data.accessToken)
    alert("註冊成功！")
    email.value = '';
    password.value = '';
    window.location.assign("index.html");

  })
  .catch((err)=>{
    // console.log(err)
    alert(err.response.data)
  })
})

document.querySelector("#login").addEventListener("click",function(){
    axios.post("http://localhost:3000/login",{
      "email": email.value.trim(),
      "password": password.value,
    })
    .then((res)=>{
      console.log(res.data.accessToken)
      alert("登入成功")
      email.value = '';
      password.value = '';
      window.location.assign("index.html");
    })
    .catch((err)=>{
      // console.log(err.response.data)
      alert(err.response.data)
    })
  })



</script>